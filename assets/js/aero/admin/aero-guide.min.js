"use strict";Aero.view.guide.admin={id:"",renderRoles:function(){this.renderMapping("roles")},renderPathways:function(){this.renderMapping("pathways")},renderMapping:function(a){Aero[a].getAll(function(b){$q(".aero-"+a).html("").append('<option value="">- Select a '+a.slice(0,-1)+" -</option>");for(var c in b){if(b.hasOwnProperty(c)){$q(".aero-"+a).append('<option value="'+b[c].id+'">'+b[c].title+"</option>")}}});Aero[a].getByGuideid(Aero.view.admin.guideid,function(b){$q(".aero-"+a+"-list ul").html("");for(var c in b){if(b.hasOwnProperty(c)){$q(".aero-"+a+"-list ul").append('<li class="clearfix" data-id="'+b[c].id+'"><a class="aero-btn-grey"><i class="fa fa-times"></i></a><span>'+b[c].title+"</span></li>")}}})},save:function(){var b=Aero.view.admin.guideid;var a=$q("#editGuideFrm").aeroSerialize();a.desc=$q("#aeroEditor").trumbowyg("html");Aero.view.admin.close();a.active=(a.active=="1");a.auto=(a.auto=="1")?true:null;a.autoPage=(a.autoPage=="1")?true:null;if(b!=""){a.id=b;Aero.guide.update(a)}else{Aero.guide.create(a,function(c){Aero.tip.start(c)})}},setEvents:function(a){var b=this;$q("body").off("click.aeroGCreate").on("click.aeroGCreate","a.aero-btn-create",function(){Aero.view.admin.guideid="";Aero.view.admin.render("guide",{});return false});$q("body").off("click.aeroSMenu").on("click.aeroSMenu",".aero-strip-menu a",function(){var c=$q(this).parents("li:eq(0)");Aero.view.admin.renderMenu(c);return false});$q("body").off("click.aeroGDelete").on("click.aeroGDelete",".aero-guides ul li a.aero-delete",function(){var c=$q(this).parents("li:eq(0)");var e=c.data("guideid");var d=c.find("a:last").text();Aero.confirm({ok:"Delete",title:d,msg:"Are you sure you want to delete this guide?",onConfirm:function(){Aero.guide.destroy(e)}});return false});$q("body").off("click.aeroGEdit").on("click.aeroGEdit",".aero-guides ul li a.aero-edit",function(){Aero.view.admin.edit($q(this));return false});$q("body").off("keypress.gsa").on("keypress.gsa","#editGuideFrm input",function(d){var c=d.keyCode||d.which;if(c=="13"){if(Aero.model.guide.validate()){b.save()}return false}});$q("body").off("click.aeroGSave").on("click.aeroGSave",".aero-editing-guide .aero-btn-save",function(){if(Aero.model.guide.validate()){b.save();return false}});$q("body").off("click.apA").on("click.apA",".aero-pathways-search a",function(){var c=$q(".aero-pathways").val();if(c!=""){Aero.pathways.createMapping(c,Aero.view.admin.guideid)}return false});$q("body").off("click.dpA").on("click.dpA",".aero-pathways-list a",function(){var c=$q(this).parent().data("id");Aero.confirm({ok:"unlink",title:"Removing pathway link",msg:"Are you sure you want to remove this pathway?",onConfirm:function(){Aero.pathways.destroyMapping(c,Aero.view.admin.guideid)}});return false});$q("body").off("click.arA").on("click.arA",".aero-roles-search a",function(){var c=$q(".aero-roles").val();if(c!=""){Aero.roles.createMapping(c,Aero.view.admin.guideid)}return false});$q("body").off("click.arcs").on("click.arcs",".aero-section input[name='aero_isRestrict']",function(){$q(".aero-color-wrapper").hide();if($q(this).is(":checked")){$q(".aero-color-wrapper").show()}});$q("body").off("click.drA").on("click.drA",".aero-roles-list a",function(){var c=$q(this).parent().data("id");Aero.confirm({ok:"unlink",title:"Removing role link",msg:"Are you sure you want to remove this role?",onConfirm:function(){Aero.roles.destroyMapping(c,Aero.view.admin.guideid)}});return false})}};